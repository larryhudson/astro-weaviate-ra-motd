---
import fs from "node:fs";
import { importMixesFromJson } from "@src/lib/weaviate/ingest_batch";

if (Astro.request.method === "POST") {
    const jsonFilePath = import.meta.env.VITE_JSON_DATA_PATH;
    console.log(`Reading JSON data from ${jsonFilePath}`);
    await importMixesFromJson(jsonFilePath);
    return Astro.redirect("/");
}
---
